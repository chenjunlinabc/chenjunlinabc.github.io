<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>node.js包管理工具npm的简单使用 | 知政的个人博客</title>
<meta name=keywords content="node.js,npm"><meta name=description content="npm是Node.js的默认包管理工具
安装npm：安装node.js(一般来说安装nodejs都会安装npm的)
npm -v 查看npm版本号 node -v 查看node版本号 npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm npm init -y 初始化 npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来 npm uninstall 要删除的依赖的名称 npm i 要安装的依赖@版本号 安装指定版本的依赖 npm update 依赖名称 安装最新的依赖或者更新npm npm init -y 使用默认的参数，去掉-y就是手动配置 npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本 npm adduser 注册npm账号 npm publish 发布npm包 npm install 一键安装package.json文件里的所有依赖 npm install &ndash;dependencies 只安装package.json里的dependencies的文件 npm install &ndash;devDependencies 只安装package.json里的devDependencies文件 会自动将package.json中的模块安装到node-modules文件夹
升级插件 npm-check-updates使用 npm install -g npm-check-updates 安装npm-check-updates插件 ncu 查看package.json中依赖的最新版本 ncu -u 更新依赖到最新版本 ncu -a 更新全部依赖到最新版本 npm update"><meta name=author content="Me"><link rel=canonical href=https://99999.fun/posts/31/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.4599eadb9eb2ad3d0a8d6827b41a8fda8f2f4af226b63466c09c5fddbc8706b7.css rel="preload stylesheet" as=style><link rel=icon href=https://99999.fun/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://99999.fun/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://99999.fun/favicon.ico><link rel=apple-touch-icon href=https://99999.fun/favicon.ico><link rel=mask-icon href=https://99999.fun/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://99999.fun/posts/31/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="node.js包管理工具npm的简单使用"><meta property="og:description" content="npm是Node.js的默认包管理工具
安装npm：安装node.js(一般来说安装nodejs都会安装npm的)
npm -v 查看npm版本号 node -v 查看node版本号 npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm npm init -y 初始化 npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来 npm uninstall 要删除的依赖的名称 npm i 要安装的依赖@版本号 安装指定版本的依赖 npm update 依赖名称 安装最新的依赖或者更新npm npm init -y 使用默认的参数，去掉-y就是手动配置 npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本 npm adduser 注册npm账号 npm publish 发布npm包 npm install 一键安装package.json文件里的所有依赖 npm install &ndash;dependencies 只安装package.json里的dependencies的文件 npm install &ndash;devDependencies 只安装package.json里的devDependencies文件 会自动将package.json中的模块安装到node-modules文件夹
升级插件 npm-check-updates使用 npm install -g npm-check-updates 安装npm-check-updates插件 ncu 查看package.json中依赖的最新版本 ncu -u 更新依赖到最新版本 ncu -a 更新全部依赖到最新版本 npm update"><meta property="og:type" content="article"><meta property="og:url" content="https://99999.fun/posts/31/"><meta property="og:image" content="https://99999.fun/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-16T15:05:00+00:00"><meta property="article:modified_time" content="2021-06-16T15:05:00+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://99999.fun/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="node.js包管理工具npm的简单使用"><meta name=twitter:description content="npm是Node.js的默认包管理工具
安装npm：安装node.js(一般来说安装nodejs都会安装npm的)
npm -v 查看npm版本号 node -v 查看node版本号 npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm npm init -y 初始化 npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来 npm uninstall 要删除的依赖的名称 npm i 要安装的依赖@版本号 安装指定版本的依赖 npm update 依赖名称 安装最新的依赖或者更新npm npm init -y 使用默认的参数，去掉-y就是手动配置 npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本 npm adduser 注册npm账号 npm publish 发布npm包 npm install 一键安装package.json文件里的所有依赖 npm install &ndash;dependencies 只安装package.json里的dependencies的文件 npm install &ndash;devDependencies 只安装package.json里的devDependencies文件 会自动将package.json中的模块安装到node-modules文件夹
升级插件 npm-check-updates使用 npm install -g npm-check-updates 安装npm-check-updates插件 ncu 查看package.json中依赖的最新版本 ncu -u 更新依赖到最新版本 ncu -a 更新全部依赖到最新版本 npm update"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://99999.fun/posts/"},{"@type":"ListItem","position":2,"name":"node.js包管理工具npm的简单使用","item":"https://99999.fun/posts/31/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"node.js包管理工具npm的简单使用","name":"node.js包管理工具npm的简单使用","description":"npm是Node.js的默认包管理工具\n安装npm：安装node.js(一般来说安装nodejs都会安装npm的)\nnpm -v 查看npm版本号 node -v 查看node版本号 npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm npm init -y 初始化 npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来 npm uninstall 要删除的依赖的名称 npm i 要安装的依赖@版本号 安装指定版本的依赖 npm update 依赖名称 安装最新的依赖或者更新npm npm init -y 使用默认的参数，去掉-y就是手动配置 npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本 npm adduser 注册npm账号 npm publish 发布npm包 npm install 一键安装package.json文件里的所有依赖 npm install \u0026ndash;dependencies 只安装package.json里的dependencies的文件 npm install \u0026ndash;devDependencies 只安装package.json里的devDependencies文件 会自动将package.json中的模块安装到node-modules文件夹\n升级插件 npm-check-updates使用 npm install -g npm-check-updates 安装npm-check-updates插件 ncu 查看package.json中依赖的最新版本 ncu -u 更新依赖到最新版本 ncu -a 更新全部依赖到最新版本 npm update","keywords":["node.js","npm"],"articleBody":"npm是Node.js的默认包管理工具\n安装npm：安装node.js(一般来说安装nodejs都会安装npm的)\nnpm -v 查看npm版本号 node -v 查看node版本号 npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm npm init -y 初始化 npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来 npm uninstall 要删除的依赖的名称 npm i 要安装的依赖@版本号 安装指定版本的依赖 npm update 依赖名称 安装最新的依赖或者更新npm npm init -y 使用默认的参数，去掉-y就是手动配置 npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本 npm adduser 注册npm账号 npm publish 发布npm包 npm install 一键安装package.json文件里的所有依赖 npm install –dependencies 只安装package.json里的dependencies的文件 npm install –devDependencies 只安装package.json里的devDependencies文件 会自动将package.json中的模块安装到node-modules文件夹\n升级插件 npm-check-updates使用 npm install -g npm-check-updates 安装npm-check-updates插件 ncu 查看package.json中依赖的最新版本 ncu -u 更新依赖到最新版本 ncu -a 更新全部依赖到最新版本 npm update\n该升级插件和npm自带的差别在于npm自带的只能通过package.json文件中所标注的版本号更新，要手动更改，而该升级插件会自动更新package.json文件中所标注的版本号\n安装淘宝 NPM 镜像 npm install -g cnpm –registry=https://registry.npm.taobao.org\n全局设置淘宝 NPM 镜像 npm config set registry https://registry.npm.taobao.org -g\n使用方法 cnpm install 包名\npackage.json文件是用来定义包的属性 name 是包名 version 是包的版本号 description 是包的描述 homepage 是包的官网的url author 是包的作者名称 contributors 是包的其他贡献者名称 dependencies 是依赖包的列表，有依赖的名称和依赖的版本号，npm会自动将依赖安装到node_module目录下 repository 包代码存放的地方的类型，git或者svn main 指定了程序的主入口文件 keywords 关键字\n启动项目\nnpm run dev\nnpm run serve\n用npm安装的包都在package.json中声明了，在另一个环境下，直接npm install，就可以一键安装该项目的全部包，不用一个个安装了\nnpm install执行流程，找到npmrc文件，得到包从哪里下，下到哪里的数据，然后再判断是否存在package-lock.json文件，存在则和package.json判断版本声明是否一致（从缓存，网络资源加载依赖），一致则按照package-lock.json处理，不一致则按照package.json处理，并且更新package-lock.json\n如果没有package-lock.json文件则检查是否存在缓存，如果有缓存则解压到node_modules中，并且生成package-lock.json文件，如果没有缓存则从npm远程仓库获取包，检查包的完整性，然后添加到缓存，构建依赖树，并且解压到node_modules中，然后再生成package-lock.json文件\nnpmrc文件优先级：项目的npmrc文件\u003e用户npmrc文件\u003e全局npmrc文件\u003enpm内置的npmrc文件\nnpm安装会先根据npmrc文件选择npm远程仓库\n项目npmrc文件在当前项目的目录\n用户npmrc文件可通过执行npm config get userconfig查看目录\n全局npmrc文件（公共npmrc）可通过npm config get prefix查看目录\n例如在项目根目录下创建.npmrc文件，并且设置registry=https://registry.npm.taobao.org\nnpmrc文件的配置是通过键值对的形式的，registry为key，https://registry.npm.taobao.org为value\n设置用户npmrc文件\n可以直接修改用户npmrc文件或者执行npm config set registry https://registry.npm.taobao.org\n设置全局npmrc文件\n可以直接修改全局npmrc文件或者执行config set registry https://registry.npm.taobao.org -g\n快速修改用户npmrc文件，npm config edit\n快速修改全局npmrc文件，npm config edit -g\n删除registry（npmrc的其他配置也可以修改，npm config delete key）\nnpm config delete registry\n查看npmrc详细配置\nnpm config list [-l]\n查看npmrc具体参数配置（npmrc的其他配置也可以查看，npm get registry key）\nnpm get registry registry\n查看全局环境包目录，npm root -g\nnpm优先安装依赖到当前项目目录的node_modules目录中，也就是说同一依赖可能在计算机上多次安装，当然也可以使用参数-g全局安装\nnpm缓存\n查看npm缓存目录，npm config get cache\n清除缓存，npm cache clean –force\n下载包时会先下载到缓存中，使用pacote包解压到node_modules目录中\n其中pacote包又依赖于npm-registry-fetch来下载包，并且根据IETF RFC 7234生成缓存\n在下载包时，根据package-lock.json存储的integrity，version，name信息生成唯一的key\n如果存在缓存资源，则寻找其tar包的hash，通过pacote包将其解压到node_modules目录中\nnpm init可生成一个初始化的package.json，可通过js脚本来自定义npm init\nnpm-init.js\nmodule.exports = {\rname: prompt('name?''halloword'),\rversion: prompt('version?''0.0.1')\r}\rnpm config set init-module ~.npm-init.js\nnpm link（方便本地开发包，以及调试测试，假设npmModulea目录是一个包项目目录）\n先进入包项目目录（npmModulea目录），执行npm link，执行该命令会让npmModulea包被链接到全局node_modules目录中（软链接）\n在包项目目录（npmModulea目录）执行npm link npmModulea，该命令可以让npmModulea包链接到当前项目的node_modules目录中\nnpx可以直接执行node_modules目录的.bin目录下的文件，还可以在执行命令时自动检查命令是否存在\n而且npx在执行模块时，会优先安装模块的依赖，在执行之后会删除这些依赖，避免全局安装模块带了的问题\n部署私有npm镜像，nexus（java环境），verdaccio（Python环境），cnpm（node环境）\ncnpm私有npm镜像仓库：https://github.com/cnpm/cnpmjs.org\n简化依赖树，npm dedupe，避免几个包依赖另一个同版本包时，存在多个依赖的情况（yarn会自动执行该命令，自动扁平化依赖树）\nnpm ci要求项目存在package-lock.json或者npm-shrinkwrap.json，而且npm ci比npm install安装更严格，其完全根据package-lock.json安装依赖（安装依赖时不会修改package-lock.json和package.json），当package-lock.json中的依赖于package.json不一致时，报错退出并且不会修改package-lock.json\n注意：package-lock.json和npm-shrinkwrap.json同时存在项目目录时，package-lock.json会被忽略\nnpm ci安装依赖前，会先删除原来项目的node_modules文件夹，然后全新安装，而且是一次安装项目的全部依赖，不能安装单个依赖，所以其不需要去校验已下载依赖版本与控制版本的关系，也不用校验是否存在最新版本的库，下载的速度会更快\npackage-lock.json可以优化依赖的安装速度，package-lock.json已经保存了每个包的具体版本和下载链接，不需要再向远程仓库进行查询，获取到依赖后可直接进入文件完整性校验环节（integrity）\n而且package-lock.json可以锁定其依赖结构，保证执行npm install都得到相同的node_modules\npackage-lock.json保存其生成的依赖树是一致的，而package.json只能得到自己安装的依赖，但是其依赖的子依赖并没有记录，子依赖可能会发生改变或者更新了版本，从而导致其依赖树不一致\npackage-lock.json中的xxxdependencies\ndependencies表示项目依赖（会自动下载），devDependencies表示开发依赖（不会自动下载），peerDependencies表示同版本依赖（父依赖，宿主依赖），bundledDependencies表示捆绑依赖，optionalDependencies表示可选依赖\n注意：peerDependencies指定的依赖会进行安装，在引用这个依赖时，会先引用宿主依赖，bundledDependencies中指定的依赖，需要先在dependencies和devDependencies声明过，否则会报错，optionalDependencies中指定的依赖哪怕安装失败了，也不会导致安装失败\npeerDependencies其中的依赖就是好吧antd依赖于react和react-dom一样，是宿主依赖，表示你安装我时，最好安装这些依赖\n","wordCount":"247","inLanguage":"en","datePublished":"2021-06-16T15:05:00Z","dateModified":"2021-06-16T15:05:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://99999.fun/posts/31/"},"publisher":{"@type":"Organization","name":"知政的个人博客","logo":{"@type":"ImageObject","url":"https://99999.fun/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://99999.fun/ accesskey=h title="知政的个人博客 (Alt + H)"><img src=https://99999.fun/favicon.ico alt aria-label=logo height=35>知政的个人博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://99999.fun/ title=首页><span>首页</span></a></li><li><a href=https://99999.fun/categories/ title=分类><span>分类</span></a></li><li><a href=https://99999.fun/archives/ title=归档><span>归档</span></a></li><li><a href=https://99999.fun/tags/ title=标签><span>标签</span></a></li><li><a href=https://99999.fun/links/ title=链接><span>链接</span></a></li><li><a href=https://99999.fun/about/ title=关于><span>关于</span></a></li><li><a href=https://99999.fun/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://99999.fun/>Home</a>&nbsp;»&nbsp;<a href=https://99999.fun/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">node.js包管理工具npm的简单使用</h1><div class=post-meta><span title='2021-06-16 15:05:00 +0000 UTC'>2021-06-16</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://99999.fun//posts/node.js%e5%8c%85%e7%ae%a1%e7%90%86%e5%b7%a5%e5%85%b7npm%e7%9a%84%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>npm是Node.js的默认包管理工具</p><p>安装npm：安装node.js(一般来说安装nodejs都会安装npm的)</p><p>npm -v 查看npm版本号
node -v 查看node版本号
npm install nmp@latest -g 更新最新nmp，-g全局，没有加-g就是本地安装，或者在@后面加版本号来更新到指定版本的npm
npm init -y 初始化
npm i 要安装的依赖 先检查有没有这个东西，有的话就下载下来
npm uninstall 要删除的依赖的名称
npm i 要安装的依赖@版本号 安装指定版本的依赖
npm update 依赖名称 安装最新的依赖或者更新npm
npm init -y 使用默认的参数，去掉-y就是手动配置
npm run 对象名 执行脚本,引用package.json中的scripts对象，在对象中添加脚本
npm adduser 注册npm账号
npm publish 发布npm包
npm install 一键安装package.json文件里的所有依赖
npm install &ndash;dependencies 只安装package.json里的dependencies的文件
npm install &ndash;devDependencies 只安装package.json里的devDependencies文件
会自动将package.json中的模块安装到node-modules文件夹</p><p>升级插件 npm-check-updates使用
npm install -g npm-check-updates 安装npm-check-updates插件
ncu 查看package.json中依赖的最新版本
ncu -u 更新依赖到最新版本
ncu -a 更新全部依赖到最新版本
npm update</p><p>该升级插件和npm自带的差别在于npm自带的只能通过package.json文件中所标注的版本号更新，要手动更改，而该升级插件会自动更新package.json文件中所标注的版本号</p><p>安装淘宝 NPM 镜像
npm install -g cnpm &ndash;registry=https://registry.npm.taobao.org</p><p>全局设置淘宝 NPM 镜像
npm config set registry <a href=https://registry.npm.taobao.org>https://registry.npm.taobao.org</a> -g</p><p>使用方法
cnpm install 包名</p><p>package.json文件是用来定义包的属性
name 是包名
version 是包的版本号
description 是包的描述
homepage 是包的官网的url
author 是包的作者名称
contributors 是包的其他贡献者名称
dependencies 是依赖包的列表，有依赖的名称和依赖的版本号，npm会自动将依赖安装到node_module目录下
repository 包代码存放的地方的类型，git或者svn
main 指定了程序的主入口文件
keywords 关键字</p><hr><p>启动项目</p><p>npm run dev</p><p>npm run serve</p><hr><p>用npm安装的包都在package.json中声明了，在另一个环境下，直接npm install，就可以一键安装该项目的全部包，不用一个个安装了</p><p>npm install执行流程，找到npmrc文件，得到包从哪里下，下到哪里的数据，然后再判断是否存在package-lock.json文件，存在则和package.json判断版本声明是否一致（从缓存，网络资源加载依赖），一致则按照package-lock.json处理，不一致则按照package.json处理，并且更新package-lock.json</p><p>如果没有package-lock.json文件则检查是否存在缓存，如果有缓存则解压到node_modules中，并且生成package-lock.json文件，如果没有缓存则从npm远程仓库获取包，检查包的完整性，然后添加到缓存，构建依赖树，并且解压到node_modules中，然后再生成package-lock.json文件</p><p>npmrc文件优先级：项目的npmrc文件>用户npmrc文件>全局npmrc文件>npm内置的npmrc文件</p><p>npm安装会先根据npmrc文件选择npm远程仓库</p><p>项目npmrc文件在当前项目的目录</p><p>用户npmrc文件可通过执行npm config get userconfig查看目录</p><p>全局npmrc文件（公共npmrc）可通过npm config get prefix查看目录</p><p>例如在项目根目录下创建.npmrc文件，并且设置registry=https://registry.npm.taobao.org</p><p>npmrc文件的配置是通过键值对的形式的，registry为key，https://registry.npm.taobao.org为value</p><p>设置用户npmrc文件</p><p>可以直接修改用户npmrc文件或者执行npm config set registry <a href=https://registry.npm.taobao.org>https://registry.npm.taobao.org</a></p><p>设置全局npmrc文件</p><p>可以直接修改全局npmrc文件或者执行config set registry <a href=https://registry.npm.taobao.org>https://registry.npm.taobao.org</a> -g</p><p>快速修改用户npmrc文件，npm config edit</p><p>快速修改全局npmrc文件，npm config edit -g</p><p>删除registry（npmrc的其他配置也可以修改，npm config delete key）</p><p>npm config delete registry</p><p>查看npmrc详细配置</p><p>npm config list [-l]</p><p>查看npmrc具体参数配置（npmrc的其他配置也可以查看，npm get registry key）</p><p>npm get registry registry</p><p>查看全局环境包目录，npm root -g</p><p>npm优先安装依赖到当前项目目录的node_modules目录中，也就是说同一依赖可能在计算机上多次安装，当然也可以使用参数-g全局安装</p><p>npm缓存</p><p>查看npm缓存目录，npm config get cache</p><p>清除缓存，npm cache clean &ndash;force</p><p>下载包时会先下载到缓存中，使用pacote包解压到node_modules目录中</p><p>其中pacote包又依赖于npm-registry-fetch来下载包，并且根据IETF RFC 7234生成缓存</p><p>在下载包时，根据package-lock.json存储的integrity，version，name信息生成唯一的key</p><p>如果存在缓存资源，则寻找其tar包的hash，通过pacote包将其解压到node_modules目录中</p><p>npm init可生成一个初始化的package.json，可通过js脚本来自定义npm init</p><p>npm-init.js</p><pre><code>module.exports = {
    name: prompt('name?''halloword'),
    version: prompt('version?''0.0.1')
}
</code></pre><p>npm config set init-module ~.npm-init.js</p><p>npm link（方便本地开发包，以及调试测试，假设npmModulea目录是一个包项目目录）</p><p>先进入包项目目录（npmModulea目录），执行npm link，执行该命令会让npmModulea包被链接到全局node_modules目录中（软链接）</p><p>在包项目目录（npmModulea目录）执行npm link npmModulea，该命令可以让npmModulea包链接到当前项目的node_modules目录中</p><p>npx可以直接执行node_modules目录的.bin目录下的文件，还可以在执行命令时自动检查命令是否存在</p><p>而且npx在执行模块时，会优先安装模块的依赖，在执行之后会删除这些依赖，避免全局安装模块带了的问题</p><p>部署私有npm镜像，nexus（java环境），verdaccio（Python环境），cnpm（node环境）</p><p>cnpm私有npm镜像仓库：https://github.com/cnpm/cnpmjs.org</p><p>简化依赖树，npm dedupe，避免几个包依赖另一个同版本包时，存在多个依赖的情况（yarn会自动执行该命令，自动扁平化依赖树）</p><p>npm ci要求项目存在package-lock.json或者npm-shrinkwrap.json，而且npm ci比npm install安装更严格，其完全根据package-lock.json安装依赖（安装依赖时不会修改package-lock.json和package.json），当package-lock.json中的依赖于package.json不一致时，报错退出并且不会修改package-lock.json</p><p>注意：package-lock.json和npm-shrinkwrap.json同时存在项目目录时，package-lock.json会被忽略</p><p>npm ci安装依赖前，会先删除原来项目的node_modules文件夹，然后全新安装，而且是一次安装项目的全部依赖，不能安装单个依赖，所以其不需要去校验已下载依赖版本与控制版本的关系，也不用校验是否存在最新版本的库，下载的速度会更快</p><p>package-lock.json可以优化依赖的安装速度，package-lock.json已经保存了每个包的具体版本和下载链接，不需要再向远程仓库进行查询，获取到依赖后可直接进入文件完整性校验环节（integrity）</p><p>而且package-lock.json可以锁定其依赖结构，保证执行npm install都得到相同的node_modules</p><p>package-lock.json保存其生成的依赖树是一致的，而package.json只能得到自己安装的依赖，但是其依赖的子依赖并没有记录，子依赖可能会发生改变或者更新了版本，从而导致其依赖树不一致</p><p>package-lock.json中的xxxdependencies</p><p>dependencies表示项目依赖（会自动下载），devDependencies表示开发依赖（不会自动下载），peerDependencies表示同版本依赖（父依赖，宿主依赖），bundledDependencies表示捆绑依赖，optionalDependencies表示可选依赖</p><p>注意：peerDependencies指定的依赖会进行安装，在引用这个依赖时，会先引用宿主依赖，bundledDependencies中指定的依赖，需要先在dependencies和devDependencies声明过，否则会报错，optionalDependencies中指定的依赖哪怕安装失败了，也不会导致安装失败</p><p>peerDependencies其中的依赖就是好吧antd依赖于react和react-dom一样，是宿主依赖，表示你安装我时，最好安装这些依赖</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://99999.fun/tags/node.js/>Node.js</a></li><li><a href=https://99999.fun/tags/npm/>Npm</a></li></ul><nav class=paginav><a class=prev href=https://99999.fun/posts/33/><span class=title>« Prev</span><br><span>Linux环境下简单搭建Minecraft服务器（java版）</span>
</a><a class=next href=https://99999.fun/posts/30/><span class=title>Next »</span><br><span>Git版本管理系统学习笔记</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://99999.fun/>知政的个人博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>